## Composite Pattern

<br>


### 컴포지트 패턴

> 객체들의 관계를 트리구조로 구성하여 부분-전체 계층을 표현하는 패턴으로 사용자가 단일객체와 복합객체를 모두 동일하게 다루도록 한다.

- 그룹 전체와 개별 객체를 동일하게 처리 가능
- 클라이언트 입장에서는 '전체' 나 '부분'이나 모두 동일한 컴포넌트로 인식할 수 있는 계층 구조

<br>

![image](https://user-images.githubusercontent.com/76927397/187065529-ed01a3a7-aeb9-40bb-9195-8e9f07243125.png)


<br>

### Composite

- 하나 이상의 유사한 객체를 구성으로 설계된 객체로 모두 유사한 기능을 나타냄
- 이를 통해 객체 그룹을 조작하는 것 처럼 단일 객체를 조작할 수 있음
- 트리구조로 작성하여 전체-부분 관계를 표현

> 복합객체와 단일객체를 동일하게 취급하게 하는 것을 목적으로 한다.

<br>

### 언제사용?

복합객체와 단일객체의 처리방법이 다르지 않을 경우 전체-부분 관계라고 할 수 있다.

- 전체-부분 관계를 트리구조로 표현하고 싶을 경우
- 전체-부분 관계를 클라이언트 부분에서 균일하게 처리하고 싶을 때


<br>

**전**

![image](https://user-images.githubusercontent.com/76927397/187066529-9effb03d-ac47-4099-97fd-57d9ae8f928c.png)

<br>

**후**

![image](https://user-images.githubusercontent.com/76927397/187066507-10eb2fda-7fa3-4472-abee-8bad4395266a.png)

Bucket 을 Composite 라고 보자

전의 경우 가격 조회라는 동작을 위해 각 클래스는 가격 조회 부분을 구현해야 하고 사용 부분에서 이를 따로 사용할 수 있었다.

컴포지트 패턴을 적용하면 Component 라는 인터페이스를 통해 두 전체-부분 객체가 이를 구현하게 해주고 클라이언트 부분에서는

해당 동작을 활용해 전체 또는 부분에 대해 중복없이 동일한 동작으로 처리할 수 있다.


<br>

### 장점

- 복잡한 객체 트리구조를 편하게 사용할 수 있다.
- 트리의 최상위인지 잎에 해당하는지 상관없이 클라이언트에서 공통된 인터페이스를 활용해 동작을 동일한 방법으로 처리할 수 있다.
- **클라이언트에서 새로운 타입의 잎 또는 전체가 추가될 떄 클라이언트 코드부분이 변경되지 않는다**

> Component 라는 추상적인 인터페이스 타입을 통해 클라이언트가 동작을 처리하기 때문에 확장에 열리게 된다.

<br>

### 단점

- 전체-부분에 대한 공통성이 없을 경우에는 처리가 힘들다. (일반화가 쉽지 않을 경우)

> 일반화가 쉽지 않아 특정 타입에 종속된 동작이 존재해 분기가 필요하다던가 하면 패턴 도입 자체를 고려하자


<br>

