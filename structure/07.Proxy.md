## Proxy Pattern

<br>

### 프록시 패턴

객체 오퍼레이션에 접근하기 전에 프록시 객체에 먼저 접근

클라이언트가 원래 사용하고자 했던 객체를 직접 사용하는게 아니라 대리인을 통해 사용하는 것으로 

특정 객체에 대한 접근을 제어하거나 기능을 추가할 수 있다.

> 일반적으로 프록시는 다른 무언가와 이어지는 인터페이스의 역할을 하는 클래스이다. 프록시는 어떠한 것과도 인터페이스의 역할을 수행할 수 있다. 


<br>

### 언제씀

-  어떤 객체를 사용할 떄 객체를 직접 참조하는게 아닌 그에 대항하는 객체를 통해 대상 객체에 접근하는 방식인데 해당 
객체가 **메모리에 존재하지 않아도 기본적인 정보를 참조하거나 설정할 수 있고 실제 객체의 기능이 필요한 시점까지 객체의 생성을 미룰수 있다.**

> 초기화 지연, 로깅, 캐싱, 접근제어 등에 사용할 수 있다.

### 장점

- 사이즈가 큰 객체 로딩 전에도 프록시를 통해 참조할 수 있다.
- 실 객체의 외부에서 접근가능한 부분들을 숨기고 인터페이스만을 노출시킬 수 있다.
- 원본 객체 접근에 대해 사전 처리를 할 수 있다.

> 이것들을 기존 코드 변경 없이 할 수 있따.

- 기존 코드는 자기가 해야하는 일만 그대로 유지할 수 있다.


<br>

![image](https://user-images.githubusercontent.com/76927397/187169032-13496406-7ea6-447f-b22e-f545987ab27e.png)


프록시 객체는 기존 서비스 타입을 멤버로 가지고 실 서비스 구현체를 활용해 대신해서 클라이언트의 요구를 처리한다.


<br>


### 자바

**동적 프록싱**

- 리플렉션을 활용해 동적으로 원하는 특정 인스턴스를 런타임에 프록시를 만들어 로딩시킬 수 있음

- 한 인스턴스의 한 메소드 뿐 아니라 다양한 메소드 또는 다양한 인스턴스에 부가적인 기능같은 사전 사후 처리가 가능해짐

> 스프링의 AOP 라고 생각하면 된다.

```java
@Aspect
@Component
public class Aop {
    @Around("bean(yourBean)")
    public void hi(ProceedingJoinPoint point) {
        // 너의 부가적 사전 기능
        point.proceed();
        // 너의 부가적 사후 기능
    }
}
```


